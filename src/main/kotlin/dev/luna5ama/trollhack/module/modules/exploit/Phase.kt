package dev.luna5ama.trollhack.module.modules.exploit

import dev.luna5ama.trollhack.gui.hudgui.elements.client.Notification
import dev.luna5ama.trollhack.module.Category
import dev.luna5ama.trollhack.module.Module
import dev.luna5ama.trollhack.util.inventory.slot.hotbarSlots
import net.minecraft.init.Blocks
import net.minecraft.network.play.client.CPacketHeldItemChange
import net.minecraft.network.play.client.CPacketPlayer
import net.minecraft.util.EnumFacing
import net.minecraft.util.math.BlockPos
import net.minecraft.util.math.Vec3d


internal object TrapPhase : Module(
    name = "TrapPhase",
    category = Category.EXPLOIT,
    description = "Uses trapdoors to phase through blocks(test)"
) {
    private val offset by setting("Offset", 0.2f, 0.1f..0.6f, 0.1f)
    private val packetPlace by setting("PacketPlace", true)
/*
    fun onTick() {
        val slot = (Blocks.IRON_TRAPDOOR)
        if (slot == -1) {
            Notification.send("Cannot find trapdoor! Disabling")
            disable()
            return
        }

        val playerPos = EntityUtil.getEntityPos(mc.player)
        var trapPos: BlockPos? = null
        val offsets = arrayOf(
            BlockPos(1, 0, 0),
            BlockPos(-1, 0, 0),
            BlockPos(0, 0, 1),
            BlockPos(0, 0, -1)
        )

        for (offset in offsets) {
            val pos = playerPos.add(offset)
            if (BlockUtil.getBlock(pos) is BlockAir) continue
            trapPos = pos
        }

        if (trapPos == null) {
            Notification.("Cannot find space! Disabling")
            disable()
            return
        }

        val x = mc.player.posX
        val y = mc.player.posY
        val z = mc.player.posZ

        mc.player.connection.sendPacket(CPacketPlayer.Position(x, y + offset, z, mc.player.onGround))

        var facing: EnumFacing? = null
        for (f in EnumFacing.entries) {
            if (trapPos.add(f.directionVec) == playerPos) facing = f
        }

        mc.player.connection.sendPacket(CPacketHeldItemChange(slot))
        BlockInteractionHelper.rightClickBlock(trapPos, facing, Vec3d(0.5, 0.8, 0.5), packetPlace)
        mc.player.connection.sendPacket(CPacketHeldItemChange(mc.player.inventory.currentItem))
        mc.player.connection.sendPacket(CPacketPlayer.Position(x, y, z, mc.player.onGround))


        disable()
    }
*/
}